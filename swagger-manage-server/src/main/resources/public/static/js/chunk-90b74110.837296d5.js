(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-90b74110"],{"0b0e":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[a("el-tab-pane",{attrs:{name:"info"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-document"}),e._v(" 接口信息")]),e._v(" "),e.item.summary&&e.item.summary.length>0?a("h2",[e._v(e._s(e.item.summary))]):e._e(),e._v(" "),a("div",[e._v("\n        服务接口PATH：\n        "),a("el-input",{staticStyle:{width:"700px"},attrs:{readonly:!0,size:"mini"},model:{value:e.item.path,callback:function(t){e.$set(e.item,"path",t)},expression:"item.path"}},[a("template",{slot:"prepend"},[e._v(e._s(e.item.method))])],2)],1),e._v(" "),e.item.gatewayUrl?a("div",{staticStyle:{"margin-top":"5px"}},[e._v("\n        网关接口地址：\n        "),a("el-input",{staticStyle:{width:"700px"},attrs:{readonly:!0,size:"mini"},model:{value:e.item.gatewayUrl,callback:function(t){e.$set(e.item,"gatewayUrl",t)},expression:"item.gatewayUrl"}},[a("template",{slot:"prepend"},[e._v(e._s(e.item.method))])],2)],1):e._e(),e._v(" "),a("div",{staticClass:"consumes-produces"},[a("span",{staticClass:"label"},[e._v("consumes:")]),a("span",{staticClass:"text"},[e._v(e._s((e.item.consumes||[]).join(", ")))])]),e._v(" "),a("div",{staticClass:"consumes-produces"},[a("span",{staticClass:"label"},[e._v("produces:")]),a("span",{staticClass:"text"},[e._v(e._s((e.item.produces||[]).join(", ")))])]),e._v(" "),a("h3",[e._v("接口描述")]),e._v(" "),a("div",{staticClass:"api-description"},[e._v(e._s(e.item.description))]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.formatHeaders(e.item.requestParameters).length>0,expression:"formatHeaders(item.requestParameters).length > 0"}]},[a("h3",[e._v("请求Headers")]),e._v(" "),a("parameter-table",{attrs:{data:e.formatHeaders(e.item.requestParameters)}})],1),e._v(" "),a("h3",[e._v("请求参数")]),e._v(" "),a("parameter-table",{attrs:{data:e.formatParameters(e.item.requestParameters),"show-in":!0}}),e._v(" "),a("h3",[e._v("返回参数")]),e._v(" "),a("parameter-table",{attrs:{data:e.formatParameters(e.item.responseParameters)}}),e._v(" "),a("h3",[e._v("请求参数typescript代码")]),e._v(" "),a("pre",{staticClass:"normal-text"},[e._v(e._s(e.trans2TsInterfaceStr(e.item.requestParameters,!1)))]),e._v(" "),a("h3",[e._v("返回参数typescript代码")]),e._v(" "),a("pre",{staticClass:"normal-text"},[e._v(e._s(e.trans2TsInterfaceStr(e.item.responseParameters,!0)))]),e._v(" "),a("h3",[e._v("返回示例")]),e._v(" "),a("pre",{staticClass:"normal-text"},[e._v(e._s(JSON.stringify(e.createResponseExample(e.item.responseParameters),null,4)))])],1),e._v(" "),a("el-tab-pane",{attrs:{name:"debug"}},[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"el-icon-s-promotion"}),e._v(" 调试接口")]),e._v(" "),a("docdebug",{attrs:{item:e.item}})],1)],1)],1)},r=[],l=(a("aef6"),a("a481"),a("7f7f"),a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"doc-debug"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24-e.rightSpanSize}},[a("el-input",{staticClass:"request-url",model:{value:e.url,callback:function(t){e.url=t},expression:"url"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("\n          服务接口 "+e._s(e.currentMethod)+"\n        ")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{slot:"append",loading:e.sendLoading},on:{click:e.send},slot:"append"},[e._v(" 发 送 ")])],1),e._v(" "),e.gatewayUrl?a("el-input",{staticClass:"request-url",staticStyle:{"margin-top":"5px"},model:{value:e.gatewayUrl,callback:function(t){e.gatewayUrl=t},expression:"gatewayUrl"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("\n          网关接口 "+e._s(e.currentMethod)+"\n        ")]),e._v(" "),a("el-button",{staticStyle:{width:"100px"},attrs:{slot:"append",loading:e.sendLoading},on:{click:e.sendGateway},slot:"append"},[e._v(" 发 送 ")])],1):e._e(),e._v(" "),e.gatewayUrl?a("el-input",{staticClass:"request-url",staticStyle:{"margin-top":"5px"},attrs:{placeholder:"网关token,用户登录成功后的token"},model:{value:e.authorization,callback:function(t){e.authorization=t},expression:"authorization"}},[a("span",{attrs:{slot:"prepend"},slot:"prepend"},[e._v("\n          网关token\n        ")]),e._v(" "),e.currentItem&&"GET"===e.currentItem.method?a("span",{attrs:{slot:"append"},slot:"append"},[e._v("\n          自动签名：\n          "),a("el-radio-group",{model:{value:e.signFlag,callback:function(t){e.signFlag=t},expression:"signFlag"}},[a("el-radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1):e._e()]):e._e(),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.requestInfo.pathData.length>0,expression:"requestInfo.pathData.length > 0"}],staticClass:"path-param"},[a("el-table",{attrs:{data:e.requestInfo.pathData,border:"","header-cell-style":e.cellStyle,"cell-style":e.cellStyle}},[a("el-table-column",{attrs:{prop:"name",label:"Path参数",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{attrs:{model:t.row,size:"mini"}},[a("el-form-item",{attrs:{"label-width":"0"}},["enum"===t.row.type?a("div",[a("el-select",{model:{value:t.row.example,callback:function(a){e.$set(t.row,"example",a)},expression:"scope.row.example"}},e._l(t.row.enums,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1):a("div",[a("el-input",{model:{value:t.row.example,callback:function(a){e.$set(t.row,"example",a)},expression:"scope.row.example"}})],1)])],1)]}}])})],1)],1),e._v(" "),a("el-collapse",{staticStyle:{"margin-top":"10px"},attrs:{accordion:""},model:{value:e.collapseActive,callback:function(t){e.collapseActive=t},expression:"collapseActive"}},[a("el-collapse-item",{attrs:{title:"Headers",name:"header"}},[a("span",{staticClass:"result-header-label",attrs:{slot:"title"},slot:"title"},[a("span",[e._v("Headers "),a("span",{staticClass:"param-count"},[e._v("("+e._s(e.requestInfo.headerData.length+e.requestInfo.globalHeaderData.length)+")")])])]),e._v(" "),a("div",[a("h4",[e._v("全局Headers")]),e._v(" "),a("el-table",{attrs:{data:e.requestInfo.globalHeaderData,border:"","header-cell-style":e.cellStyleSmall(),"cell-style":e.cellStyleSmall()}},[a("el-table-column",{attrs:{label:"Name",prop:"configKey",width:"300px"}}),e._v(" "),a("el-table-column",{attrs:{label:"Value",prop:"configValue"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{attrs:{model:t.row,size:"mini"}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-input",{model:{value:t.row.configValue,callback:function(a){e.$set(t.row,"configValue",a)},expression:"scope.row.configValue"}})],1)],1)]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.requestInfo.headerData.length>0,expression:"requestInfo.headerData.length > 0"}]},[a("h4",[e._v("接口Headers")]),e._v(" "),a("el-table",{attrs:{data:e.requestInfo.headerData,border:"","header-cell-style":e.cellStyle,"cell-style":e.cellStyle}},[a("el-table-column",{attrs:{label:"Name",prop:"name",width:"300px"}}),e._v(" "),a("el-table-column",{attrs:{label:"Value"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{attrs:{model:t.row,size:"mini"}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-input",{model:{value:t.row.example,callback:function(a){e.$set(t.row,"example",a)},expression:"scope.row.example"}})],1)],1)]}}])})],1)],1)])],1),e._v(" "),a("el-tabs",{staticStyle:{"margin-top":"10px"},attrs:{type:"card"},model:{value:e.requestInfo.requestActive,callback:function(t){e.$set(e.requestInfo,"requestActive",t)},expression:"requestInfo.requestActive"}},[a("el-tab-pane",{attrs:{label:"Body",name:"body"}},[a("span",{staticClass:"result-header-label",attrs:{slot:"label"},slot:"label"},[a("el-badge",{attrs:{"is-dot":e.hasBody(),type:"danger"}},[a("span",[e._v("Body")])])],1),e._v(" "),a("el-radio-group",{staticStyle:{"margin-bottom":"20px"},attrs:{size:"small"},model:{value:e.requestInfo.postActive,callback:function(t){e.$set(e.requestInfo,"postActive",t)},expression:"requestInfo.postActive"}},[a("el-radio-button",{staticClass:"json-badge",attrs:{label:"text"}},[e._v("Text")]),e._v(" "),a("el-radio-button",{attrs:{label:"form"}},[e._v("x-www-form-urlencoded "),a("span",{staticClass:"param-count"},[e._v("("+e._s(e.requestInfo.formData.length)+")")])]),e._v(" "),a("el-radio-button",{attrs:{label:"multipart"}},[e._v("multipart "),a("span",{staticClass:"param-count"},[e._v("("+e._s(e.requestInfo.multipartData.length)+")")])])],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showBody("text"),expression:"showBody('text')"}]},[a("el-radio-group",{staticStyle:{"margin-bottom":"10px"},model:{value:e.contentType,callback:function(t){e.contentType=t},expression:"contentType"}},[a("el-radio",{attrs:{label:"application/json;charset=UTF-8"}},[e._v("JSON")]),e._v(" "),a("el-radio",{attrs:{label:"text/plain"}},[e._v("Text")]),e._v(" "),a("el-radio",{attrs:{label:"application/xml"}},[e._v("XML")]),e._v(" "),a("el-radio",{attrs:{label:"text/html"}},[e._v("HTML")]),e._v(" "),a("el-radio",{attrs:{label:"application/x-javascript"}},[e._v("JavaScript")])],1),e._v(" "),a("el-form",[a("el-form-item",{attrs:{"label-width":"0"}},[a("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:100}},model:{value:e.requestInfo.jsonBody,callback:function(t){e.$set(e.requestInfo,"jsonBody",t)},expression:"requestInfo.jsonBody"}})],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showBody("form"),expression:"showBody('form')"}]},[a("el-table",{attrs:{data:e.requestInfo.formData,border:"","header-cell-style":e.cellStyle,"cell-style":e.cellStyle}},[a("el-table-column",{attrs:{prop:"name",label:"参数名",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{attrs:{model:t.row,size:"mini"}},[a("el-form-item",{attrs:{"label-width":"0"}},["enum"===t.row.type?a("div",[a("el-select",{model:{value:t.row.example,callback:function(a){e.$set(t.row,"example",a)},expression:"scope.row.example"}},e._l(t.row.enums,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1):a("div",[a("el-input",{model:{value:t.row.example,callback:function(a){e.$set(t.row,"example",a)},expression:"scope.row.example"}})],1)])],1)]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showBody("multipart"),expression:"showBody('multipart')"}]},[a("el-upload",{staticStyle:{width:"500px","margin-bottom":"10px"},attrs:{action:"",multiple:!0,"auto-upload":!1,"on-remove":function(t,a){return e.onSelectMultiFile(t,a)},"on-change":function(t,a){return e.onSelectMultiFile(t,a)}}},[a("el-button",{attrs:{slot:"trigger",type:"primary",size:"mini"},slot:"trigger"},[e._v("上传多个文件")])],1),e._v(" "),a("el-table",{directives:[{name:"show",rawName:"v-show",value:e.showBody("multipart"),expression:"showBody('multipart')"}],attrs:{data:e.requestInfo.multipartData,border:"","header-cell-style":e.cellStyle,"cell-style":e.cellStyle}},[a("el-table-column",{attrs:{prop:"name",label:"参数名",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{attrs:{model:t.row,size:"mini"}},[a("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{"label-width":"0"}},["file"===t.row.type||"file"===t.row.elementType?a("el-upload",{attrs:{action:"",multiple:!0,"auto-upload":!1,"on-change":function(a,s){return e.onSelectFile(a,s,t.row)},"on-remove":function(a,s){return e.onSelectFile(a,s,t.row)}}},[a("el-button",{staticClass:"choose-file",attrs:{slot:"trigger",type:"primary"},slot:"trigger"},[e._v("选择文件")])],1):"enum"===t.row.type?a("div",[a("el-select",{model:{value:t.row.example,callback:function(a){e.$set(t.row,"example",a)},expression:"scope.row.example"}},e._l(t.row.enums,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1):a("div",[a("el-input",{model:{value:t.row.example,callback:function(a){e.$set(t.row,"example",a)},expression:"scope.row.example"}})],1)],1)],1)]}}])})],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Query",name:"query"}},[a("span",{staticClass:"result-header-label",attrs:{slot:"label"},slot:"label"},[a("span",[e._v("Query "),a("span",{staticClass:"param-count"},[e._v("("+e._s(e.requestInfo.queryData.length)+")")])])]),e._v(" "),a("el-table",{attrs:{data:e.requestInfo.queryData,border:"","header-cell-style":e.cellStyle,"cell-style":e.cellStyle}},[a("el-table-column",{attrs:{prop:"name",label:"参数名",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{label:"参数值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{attrs:{model:t.row,size:"mini"}},[a("el-form-item",{attrs:{"label-width":"0"}},["enum"===t.row.type?a("div",[a("el-select",{model:{value:t.row.example,callback:function(a){e.$set(t.row,"example",a)},expression:"scope.row.example"}},e._l(t.row.enums,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1):a("div",[a("el-input",{model:{value:t.row.example,callback:function(a){e.$set(t.row,"example",a)},expression:"scope.row.example"}})],1)])],1)]}}])})],1)],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.saveCase}},[e._v("保存用例")]),e._v(" "),a("div",{staticStyle:{"margin-top":"10px"}},e._l(e.cases,(function(t,s){return a("el-tag",{key:s,staticStyle:{"margin-right":"10px"},attrs:{closable:""},on:{close:function(a){return e.handleCloseCase(t)}}},[a("a",{on:{click:function(a){return e.useCase(t)}}},[e._v(e._s(t.name))])])})),1)],1)],1),e._v(" "),a("el-col",{staticStyle:{"border-left":"1px #E4E7ED solid"},attrs:{span:e.rightSpanSize}},[a("div",{staticClass:"result-status"},[e._v("\n        Status: "),a("el-tag",{attrs:{type:e.result.status>=200&&e.result.status<300?"success":"danger"}},[e._v(e._s(e.result.status))])],1),e._v(" "),a("el-tabs",{attrs:{type:"card"},model:{value:e.resultActive,callback:function(t){e.resultActive=t},expression:"resultActive"}},[a("el-tab-pane",{attrs:{label:"返回结果",name:"body"}},[e.result.bodyIsImage?a("el-image",{attrs:{src:e.result.content,"preview-src-list":[e.result.content],autosize:{minRows:2,maxRows:200}}}):e._e(),e._v(" "),e.result.bodyIsImage?e._e():a("el-input",{attrs:{type:"textarea",readonly:!0,autosize:{minRows:2,maxRows:200}},model:{value:e.result.content,callback:function(t){e.$set(e.result,"content",t)},expression:"result.content"}})],1),e._v(" "),a("el-tab-pane",{attrs:{label:"Headers",name:"headers"}},[a("span",{staticClass:"result-header-label",attrs:{slot:"label"},slot:"label"},[a("span",[e._v("Headers "),a("span",{staticClass:"param-count"},[e._v("("+e._s(e.result.headerData.length)+")")])])]),e._v(" "),a("el-table",{attrs:{data:e.result.headerData,"header-cell-style":e.cellStyle,"cell-style":e.cellStyle}},[a("el-table-column",{attrs:{label:"Name",prop:"name"}}),e._v(" "),a("el-table-column",{attrs:{label:"Value",prop:"value"}})],1)],1)],1)],1)],1)],1)}),n=[],o=(a("4917"),a("55dd"),a("28a5"),a("f559"),a("3b2b"),a("8237")),i=a.n(o);a("f7cb");var u=a("e3ea"),c={name:"Docdebug",props:{item:{type:Object,default:function(){}}},data:function(){return{signFlag:0,rightSpanSize:0,currentItem:null,itemMap:null,currentMethod:"GET",cellStyle:{paddingTop:"5px",paddingBottom:"5px"},requestUrl:"",requestGatewayUrl:"",authorization:"",contentType:"application/json;charset=UTF-8",collapseActive:"",requestInfo:{requestActive:"body",postActive:"form",jsonBody:"",formData:[],multipartData:[],queryData:[],headerData:[],globalHeaderData:[],pathData:[]},uploadFiles:[],fieldTypes:[{type:"text",label:"文本"},{type:"file",label:"文件"}],resultActive:"result",sendLoading:!1,result:{bodyIsImage:!1,headerData:[],content:"",status:0},cases:[]}},computed:{url:{get:function(){var e=this.requestUrl;return this.requestInfo.pathData.forEach((function(t){e=e.replace(new RegExp("{".concat(t.name,"}")),t.example||"{".concat(t.name,"}"))})),e},set:function(e){this.requestUrl=e}},gatewayUrl:{get:function(){var e=this.requestGatewayUrl;return e?(this.requestInfo.pathData.forEach((function(t){e=e.replace(new RegExp("{".concat(t.name,"}")),t.example||"{".concat(t.name,"}"))})),e):null},set:function(e){this.requestGatewayUrl=e}}},watch:{item:function(e){this.loadItem(e)}},methods:{loadItem:function(e){var t=this;this.currentItem=e,this.currentMethod=e.method,this.requestUrl=this.bindUrl(e),this.requestGatewayUrl=e.gatewayUrl,this.bindRequestParam(e),this.loadGlobalHeaders((function(e){t.requestInfo.globalHeaderData=e.data})),this.loadCases(e)},loadCases:function(e){var t=this;e.swaggerId&&this.get("/doc-cases",{swaggerId:e.swaggerId,path:e.path,method:e.method},(function(e){t.cases=e.data}))},useCase:function(e){var t=JSON.parse(e.content);this.authorization=t.authorization,this.signFlag=t.signFlag||0,this.requestInfo.requestActive=t.requestActive,this.requestInfo.postActive=t.postActive,this.requestInfo.jsonBody=t.jsonBody,this.replaceFieldValue(this.requestInfo.formData,"name","example",t.formData),this.replaceFieldValue(this.requestInfo.multipartData,"name","example",t.multipartData),this.replaceFieldValue(this.requestInfo.queryData,"name","example",t.queryData),this.replaceFieldValue(this.requestInfo.headerData,"name","example",t.headerData),this.replaceFieldValue(this.requestInfo.globalHeaderData,"configKey","configValue",t.globalHeaderData),this.replaceFieldValue(this.requestInfo.pathData,"name","example",t.pathData),this.$message({type:"info",message:"已使用用例"+e.name})},replaceFieldValue:function(e,t,a,s){s&&e&&e.forEach((function(e){e[a]=s[e[t]]}))},getParamMap:function(){return{authorization:this.authorization,signFlag:this.signFlag,requestActive:this.requestInfo.requestActive,postActive:this.requestInfo.postActive,jsonBody:this.requestInfo.jsonBody,formData:this.paramToMap(this.requestInfo.formData,"name","example"),multipartData:this.paramToMap(this.requestInfo.multipartData,"name","example"),queryData:this.paramToMap(this.requestInfo.queryData,"name","example"),headerData:this.paramToMap(this.requestInfo.headerData,"name","example"),globalHeaderData:this.paramToMap(this.requestInfo.globalHeaderData,"configKey","configValue"),pathData:this.paramToMap(this.requestInfo.pathData,"name","example")}},paramToMap:function(e,t,a){var s={};return e.forEach((function(e){var r=e[t];s[r]=e[a]})),s},handleCloseCase:function(e){var t=this;this.$confirm("确认删除","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){t.request("DELETE","/doc-cases/"+e.id,{},{},!1,!1,!1,(function(){t.cases.splice(t.cases.indexOf(e),1)}))})).catch((function(){t.$message({type:"info",message:"已取消保存用例"})}))},saveCase:function(){var e=this;this.$prompt("请输入用例名称","保存用例",{confirmButtonText:"确定",cancelButtonText:"取消",inputErrorMessage:"用例名必须填写"}).then((function(t){var a=t.value;a?e.post("/doc-cases",{name:a,swaggerId:e.currentItem.swaggerId,path:e.currentItem.path,method:e.currentItem.method,content:JSON.stringify(e.getParamMap())},(function(t){e.cases.unshift(t.data),e.$message({type:"success",message:"保存用例成功"})})):e.$message({type:"error",message:"用例名必须填写"})})).catch((function(){e.$message({type:"info",message:"已取消保存用例"})}))},bindUrl:function(e){return e.requestUrl+e.path},bindRequestParam:function(e){var t=[],a=[],s=[],r=[],l=[],n=this.isQueryStringMethod(e),o=e.requestParameters,i=e.uploadRequest;o.forEach((function(e){var o=e.in;"path"===o?l.push(e):"header"===o?r.push(e):n?t.push(e):i||"formData"===o?s.push(e):a.push(e)})),this.requestInfo.headerData=r,this.requestInfo.queryData=t,this.requestInfo.formData=a,this.requestInfo.multipartData=s,this.requestInfo.pathData=l;var u=o.filter((function(e){return"body"===e.in})),c=u.length>0;if(c){var p="";if(1===u.length&&null==u[0].name&&u[0].type.startsWith("array(")){var m=u[0].type.indexOf("string")>-1?"test1":0;p=[m]}else{var d=u.filter((function(e){return"array"===e.parentType})).length===u.length;p=this.createResponseExample(u),d&&(p=[p])}this.requestInfo.jsonBody=JSON.stringify(p,null,4)}if(this.requestInfo.requestActive=n?"query":"body",this.requestInfo.multipartData.length>0)this.requestInfo.postActive="multipart";else{var h="";c?h="text":this.requestInfo.formData.length>0&&(h="form"),this.requestInfo.postActive=h,this.requestInfo.postActive||(this.requestInfo.requestActive="query")}},isQueryStringMethod:function(e){return["get","head"].indexOf(e.method.toLowerCase())>-1},hasBody:function(){return this.requestInfo.jsonBody.length>0||this.requestInfo.formData.length>0||this.requestInfo.multipartData.length>0},showBody:function(e){return this.requestInfo.postActive===e},onSelectFile:function(e,t,a){var s=[];t.forEach((function(e){var t=e.raw;s.push(t)})),a.__file__={name:a.name,files:s}},onSelectMultiFile:function(e,t){var a=[];t.forEach((function(e){var t=e.raw;a.push(t)})),this.uploadFiles=a},send:function(){var e=this.currentItem,t=this.buildRequestHeaders(),a=this.getParamObj(this.requestInfo.queryData),s=!1,r=!1,l=!1;switch(this.requestInfo.postActive){case"text":t["Content-Type"]=this.contentType,a=this.requestInfo.jsonBody,this.contentType.indexOf("json")>-1&&(s=!0);break;case"form":r=!0,a=this.getParamObj(this.requestInfo.formData);break;case"multipart":l=this.requestInfo.multipartData.length>0||this.uploadFiles.length>0,a=this.getParamObj(this.requestInfo.multipartData);break;default:}this.sendLoading=!0,this.request(e.method,"/doc/proxy",a,t,s,r,l,this.doProxyResponse)},sendGateway:function(){var e=this.currentItem,t=this.buildRequestHeaders();t["target-url"]=this.gatewayUrl,this.authorization&&(t["Authorization"]="Bearer "+this.authorization);var a=this.getParamObj(this.requestInfo.queryData),s=!1,r=!1,l=!1;switch(this.requestInfo.postActive){case"text":t["Content-Type"]=this.contentType,a=this.requestInfo.jsonBody,this.contentType.indexOf("json")>-1&&(s=!0);break;case"form":r=!0,a=this.getParamObj(this.requestInfo.formData);break;case"multipart":l=this.requestInfo.multipartData.length>0||this.uploadFiles.length>0,a=this.getParamObj(this.requestInfo.multipartData);break;default:}if(this.sendLoading=!0,"GET"===e.method&&this.signFlag&&this.gatewayUrl){var n=(new Date).getTime(),o=this.gatewayUrl.split("//")[1];o=o.substr(o.indexOf("/"));var u=this.queryStr(),c="".concat(o).concat(this.authorization).concat(n).concat(u),p=i()(c);t["x-zg-time"]=n,t["x-zg-sign"]=p}this.request(e.method,"/doc/proxy",a,t,s,r,l,this.doProxyResponse)},queryStr:function(){return this.requestInfo.queryData.filter((function(e){return e.example})).sort((function(e,t){return e.name>t.name?1:-1})).map((function(e){return"".concat(e.name,"=").concat(e.example)})).join("&")},buildRequestHeaders:function(){var e={};return this.requestInfo.headerData.forEach((function(t){e[t.name]=t.example||""})),this.requestInfo.globalHeaderData.forEach((function(t){e[t.configKey]=t.configValue})),e["target-url"]=this.url,e},getParamObj:function(e){var t=this,a={};if(e.forEach((function(e){var s=e.__file__;if(s){var r=t.getFileConfigs(a);r.push(s)}else null!==e.example&&""!==e.example&&(a[e.name]=e.example)})),this.uploadFiles.length>0){var s=this.getFileConfigs(a);s.push({name:"file",files:this.uploadFiles})}return a},getFileConfigs:function(e){var t=e["__files__"];return t||(t=[],e["__files__"]=t),t},doProxyResponse:function(e,t){this.sendLoading=!1,e?this.$message.error(e):(this.buildResultHeaders(t),this.buildResultStatus(e,t),this.buildResultContent(e,t))},buildResultStatus:function(e,t){if(e)this.result.status=0;else{var a=t.headers["target-statuscode"];this.result.status=a?parseInt(a):0}},buildResultContent:function(e,t){var a=t.targetHeaders,s=a["content-type"]||"",r=a["content-disposition"]||"",l=this.currentItem.produces&&this.currentItem.produces.join("");if(this.openRightPanel(),s.indexOf("stream")>-1||l.indexOf("stream")>-1||r.indexOf("attachment")>-1){var n=a["content-disposition"],o=this.getDispositionFilename(n);this.downloadFile(o,t.raw)}else{var i="";if(e)i=e.message;else{var u=t.data;if(u)try{i=this.formatResponse(s,u)}catch(m){console.error("格式转换错误",m),i=t.data}else{var c=t.raw;if(c&&c.length>0)if(s&&s.toLowerCase().indexOf("image")>-1)this.result.bodyIsImage=!0,i="data:"+s.toLowerCase()+";base64,"+btoa(c.reduce((function(e,t){return e+String.fromCharCode(t)}),""));else{this.result.bodyIsImage=!1;var p=(new TextDecoder).decode(c);try{i=this.formatResponse(s,p)}catch(m){console.error("格式转换错误",m),i=p}}}}this.result.content=i}},formatResponse:function(e,t){if(this.isObject(t))return this.formatJson(t);if(!e)return t;var a=e.toLowerCase();return a.indexOf("json")>-1?this.formatJson(JSON.parse(t)):a.indexOf("xml")>-1?u(t):t},formatJson:function(e){return JSON.stringify(e,null,4)},downloadFile:function(e,t){var a=window.URL.createObjectURL(new Blob([t])),s=document.createElement("a");s.href=a,s.setAttribute("download",e),document.body.appendChild(s),s.click()},getDispositionFilename:function(e){for(var t=e.split(";"),a=0;a<t.length;a++){var s=t[a].trim();if(s.toLowerCase().startsWith("filename")){var r=s.match(new RegExp('filename="(.*?)"',"i"));return r?r[1]:""}}},buildResultHeaders:function(e){var t=e.headers,a=t["target-response-headers"]||JSON.stringify(t),s=JSON.parse(a);e.targetHeaders=s;var r=[];if(s)for(var l in s)r.push({name:l,value:s[l]});this.result.headerData=r},openRightPanel:function(){this.resultActive="body",this.rightSpanSize=10}}},p=c,m=(a("1abd"),a("2877")),d=Object(m["a"])(p,l,n,!1,null,null,null),h=d.exports,f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",{attrs:{data:e.data,border:"","row-key":"id","default-expand-all":"","tree-props":{children:"refs",hasChildren:"hasChildren"},"cell-style":e.cellStyleSmall(),"header-cell-style":e.headCellStyleSmall(),"empty-text":"无参数"}},[a("el-table-column",{attrs:{prop:"name",label:"名称",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.name?a("span",[e._v(e._s(t.row.name))]):e._e(),e._v(" "),t.row.name?e._e():a("span",[e._v("-")])]}}])}),e._v(" "),e.showIn?a("el-table-column",{attrs:{prop:"in",label:"参数类型",width:"100"}}):e._e(),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"数据类型",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.type))]),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"array"===t.row.type&&t.row.elementType,expression:"scope.row.type === 'array' && scope.row.elementType"}]},[a("el-tooltip",{attrs:{effect:"dark",content:"元素类型："+t.row.elementType,placement:"top"}},[a("i",{staticClass:"el-icon-info"})])],1),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:"object"===t.row.type&&t.row.elementType,expression:"scope.row.type === 'object' && scope.row.elementType"}]},[a("el-tooltip",{attrs:{effect:"dark",content:"对象类型："+t.row.elementType,placement:"top"}},[a("i",{staticClass:"el-icon-info"})])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"required",label:"必须",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{class:t.row.required?"danger":""},[e._v(e._s(t.row.required?"是":"否"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"description",label:"描述"}}),e._v(" "),a("el-table-column",{attrs:{prop:"example",label:"示例值"},scopedSlots:e._u([{key:"default",fn:function(t){return["enum"===t.row.type?a("div",[e._v("\n        "+e._s((t.row.enums||[]).join("、"))+"\n      ")]):a("div",[e._v("\n        "+e._s(t.row.example)+"\n      ")])]}}])})],1)},v=[],y={name:"ParameterTable",props:{data:{type:Array,default:function(){return[]}},tree:{type:Boolean,default:!0},showIn:{type:Boolean,default:!1}}},b=y,g=Object(m["a"])(b,f,v,!1,null,null,null),w=g.exports,_={components:{Docdebug:h,ParameterTable:w},data:function(){return{active:"info",item:{swaggerId:void 0,path:void 0,method:"",consumes:[],produces:[],requestParameters:[],responseParameters:[]},requestUrl:"",currentMethod:""}},computed:{swaggerId:{get:function(){return this.getUrlSwaggerId()||this.getSwaggerId()},set:function(e){this.setSwaggerId(e)}}},created:function(){var e=this,t=this.swaggerId,a=this.decodePathAndMethod();if(t&&a.path&&a.method){var s={path:a.path,method:a.method};this.get("/doc/".concat(this.swaggerId,"/item"),s,(function(t){e.item=t.data}))}else this.tipError("未找到文档信息")},methods:{formatParameters:function(e){return e.filter((function(e){return"header"!==e.in}))},formatHeaders:function(e){return e.filter((function(e){return"header"===e.in}))},trans2TsInterfaceStr:function(e,t){return this.trans2TsInterface(null,e,t,[])},trans2TsInterface:function(e,t,a,s){var r=this;if(null==t)return"";if(null!=e&&s.indexOf(e)>=0)return"";var l=null!=e?"\n\n":"";l+="interface ",l+=this.getInterfaceName(e,a),l+=" {";var n=[];return s.push(e),t.forEach((function(e){var t=r.trans2TsFieldStr(e,a);l+=t,"object"!==e.type&&"array"!==e.type||null==e.elementType||n.push(e)})),l+="\n}",n.forEach((function(e){l+=r.trans2TsInterface(e.elementType,e.refs,a,s)})),l},trans2TsFieldStr:function(e,t){if(null==e.type||null==e.name)return"";var a=e.type;return"integer"===a&&(a="number"),"object"!==e.type&&"array"!==e.type||(a=this.getInterfaceName(e.elementType,t)),"\n  /** "+(t?"":e.required?"必填 ":"非必填 ")+(e.description?e.description:"")+" */\n  "+e.name+"?: "+a+("array"===e.type?"[]":"")},getInterfaceName:function(e,t){if(null==e)return t?"Resp":"Req";var a=e.indexOf("«");return e=a>=0?e.substr(0,a):e.replace("对象",""),e.endsWith("VO")?e=e.substr(0,e.length-2):e.endsWith("DTO")&&(e=e.substr(0,e.length-3)),e+(t?"Resp":"Req")}}},x=_,q=(a("6613"),Object(m["a"])(x,s,r,!1,null,null,null));t["default"]=q.exports},"1abd":function(e,t,a){"use strict";a("f6fc")},6613:function(e,t,a){"use strict";a("a34d")},a34d:function(e,t,a){},f6fc:function(e,t,a){}}]);