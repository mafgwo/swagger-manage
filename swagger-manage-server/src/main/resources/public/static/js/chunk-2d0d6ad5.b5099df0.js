(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6ad5"],{7424:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("h4",[e._v("全局Headers")]),e._v(" "),a("el-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary",size:"mini"},on:{click:e.onHeaderAdd}},[e._v("添加Header")]),e._v(" "),a("el-table",{attrs:{data:e.settings.globalHeaders,border:"","header-cell-style":e.cellStyleSmall(),"cell-style":e.cellStyleSmall()}},[a("el-table-column",{attrs:{label:"Name",prop:"configKey",width:"300px"}}),e._v(" "),a("el-table-column",{attrs:{label:"Value",prop:"configValue"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.onHeaderUpdate(t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return e.onHeaderDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("h4",[e._v("多个Method重复，只显示")]),e._v(" "),a("el-form",{ref:"allowMethodsRef",attrs:{model:e.settings}},[a("el-form-item",{attrs:{prop:"allowMethods",rules:[{type:"array",required:!0,message:"请至少选择一个",trigger:"change"}]}},[a("el-checkbox-group",{model:{value:e.settings.allowMethods,callback:function(t){e.$set(e.settings,"allowMethods",t)},expression:"settings.allowMethods"}},e._l(e.allMethods,(function(e){return a("el-checkbox",{key:e,attrs:{label:e}})})),1)],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSaveAllowMethods}},[e._v("保存")])],1),e._v(" "),a("h4",[e._v("调试Host")]),e._v(" "),a("el-alert",{staticStyle:{"margin-bottom":"10px"},attrs:{title:"调试页面请求Host，不填则用默认的",closable:!1}}),e._v(" "),a("el-form",{ref:"debugHostRef",attrs:{model:e.settings}},[a("el-form-item",{attrs:{prop:"debugHost"}},[a("el-input",{attrs:{placeholder:"如：http://10.0.10.11:8080"},model:{value:e.settings.debugHost,callback:function(t){e.$set(e.settings,"debugHost",t)},expression:"settings.debugHost"}})],1),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onSaveDebugHost}},[e._v("保存")])],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogHeaderTitle,visible:e.dialogHeaderVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogHeaderVisible=t},close:function(t){return e.resetForm("dialogHeaderForm")}}},[a("el-form",{ref:"dialogHeaderForm",attrs:{rules:e.dialogFormRules,model:e.dialogHeaderFormData,"label-width":"120px",size:"mini"}},[a("el-form-item",{attrs:{prop:"configKey",label:"Name"}},[a("el-input",{attrs:{placeholder:"name"},model:{value:e.dialogHeaderFormData.configKey,callback:function(t){e.$set(e.dialogHeaderFormData,"configKey",t)},expression:"dialogHeaderFormData.configKey"}})],1),e._v(" "),a("el-form-item",{attrs:{prop:"configValue",label:"Value"}},[a("el-input",{attrs:{placeholder:"value"},model:{value:e.dialogHeaderFormData.configValue,callback:function(t){e.$set(e.dialogHeaderFormData,"configValue",t)},expression:"dialogHeaderFormData.configValue"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogHeaderVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.onDialogHeaderSave}},[e._v("保 存")])],1)],1)],1)},l=[],i={name:"Setting",data:function(){return{settings:{globalHeaders:[],allowMethods:[],debugHost:""},allMethods:["GET","POST","PUT","PATCH","DELETE","OPTIONS","HEAD"],dialogHeaderVisible:!1,dialogHeaderTitle:"",dialogHeaderFormData:{id:0,swaggerId:"",configKey:"",configValue:""},dialogFormRules:{configKey:[{required:!0,message:"不能为空",trigger:"blur"},{validator:function(e,t,a){t&&!/^[a-zA-Z0-9\-_]+$/.test(t)?a(new Error("格式错误，支持大小写英文、数字、-、下划线")):a()},trigger:"blur"}],configValue:[{required:!0,message:"不能为空",trigger:"blur"}]}}},created:function(){this.loadSettings()},methods:{loadSettings:function(){var e=this,t=this.getUrlSwaggerId()||this.getSwaggerId();this.get("/systemconfig/get",{swaggerId:t},(function(t){e.settings=t.data}))},loadHeaders:function(){var e=this;this.loadGlobalHeaders((function(t){e.settings.globalHeaders=t.data}))},onHeaderAdd:function(){this.dialogHeaderTitle="新增Header",this.dialogHeaderVisible=!0,this.dialogHeaderFormData.id=0},onHeaderUpdate:function(e){var t=this;this.dialogHeaderTitle="修改Header",this.dialogHeaderVisible=!0,this.$nextTick((function(){Object.assign(t.dialogHeaderFormData,e)}))},onHeaderDelete:function(e){this.confirm("确认要删除该记录吗？",(function(t){var a=this,o={id:e.id};this.post("/systemconfig/globalHeader/delete",o,(function(){t(),a.tip("删除成功"),a.loadHeaders()}))}))},onDialogHeaderSave:function(){var e=this;this.$refs.dialogHeaderForm.validate((function(t){if(t){var a=e.dialogHeaderFormData.id?"/systemconfig/globalHeader/update":"/systemconfig/globalHeader/add";e.dialogHeaderFormData.swaggerId=e.getUrlSwaggerId()||e.getSwaggerId(),e.post(a,e.dialogHeaderFormData,(function(){e.dialogHeaderVisible=!1,e.loadHeaders()}))}}))},onSaveAllowMethods:function(){var e=this;this.$refs.allowMethodsRef.validate((function(t){t&&e.post("/systemconfig/allowMethod/set",{list:e.settings.allowMethods},(function(){e.alert("保存成功","提示",(function(){location.reload()}))}))}))},onSaveDebugHost:function(){var e=this;this.$refs.debugHostRef.validate((function(t){if(t){var a={swaggerId:e.getUrlSwaggerId()||e.getSwaggerId(),debugHost:e.settings.debugHost};e.post("/systemconfig/debughost/set",a,(function(){e.tipSuccess("保存成功")}))}}))}}},r=i,s=a("2877"),n=Object(s["a"])(r,o,l,!1,null,null,null);t["default"]=n.exports}}]);